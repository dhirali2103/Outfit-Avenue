{% extends 'base.html' %}
{% load static %}
{% block title %}Register - Outfit Avenue{% endblock %}
{% block extra_css %}
<style>
  .auth-hero{background:var(--gradient-secondary);color:#fff;padding:100px 0 60px;text-align:center}
  .auth-card{background:#fff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.1);border:1px solid rgba(228,60,92,.1)}
  .auth-title{font-family:'Playfair Display',serif;font-weight:700}
  .form-control:focus{border-color:#e43c5c;box-shadow:0 0 0 .2rem rgba(228,60,92,.15)}
  .input-group .btn-eye{border:2px solid var(--primary-color);color:var(--primary-color);border-radius:0 10px 10px 0}
  .input-group .btn-eye:hover{background:var(--gradient-primary);color:#fff}
  .policy-text{font-size:.9rem;color:var(--text-light)}
</style>
{% endblock %}
{% block content %}
<section class="auth-hero">
  <div class="container">
    <h1 class="auth-title">Create Account</h1>
    <p>Join Outfit Avenue and start shopping</p>
  </div>
  </section>
<section class="py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-7">
        <div class="auth-card p-4" data-aos="fade-up">
          <div class="text-center mb-3">
            <span class="navbar-brand"><i class="fas fa-sun me-2"></i>Outfit Avenue</span>
          </div>
          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">{{ message }}<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>
            {% endfor %}
          {% endif %}
          <form method="POST" id="registerForm">
            {% csrf_token %}
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" name="email" placeholder="you@example.com" required>
            </div>
            <div class="mb-3">
              <label for="name" class="form-label">Full Name</label>
              <input type="text" class="form-control" id="name" name="name" placeholder="Your name" required>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3"><label for="first_name" class="form-label">First Name</label><input type="text" class="form-control" id="first_name" name="first_name" placeholder="First name"></div>
              <div class="col-md-6 mb-3"><label for="last_name" class="form-label">Last Name</label><input type="text" class="form-control" id="last_name" name="last_name" placeholder="Last name"></div>
            </div>
            <div class="mb-3"><label for="phone_number" class="form-label">Phone Number</label><input type="tel" class="form-control" id="phone_number" name="phone_number" placeholder="Phone"></div>
            <div class="mb-3 position-relative"><label for="password" class="form-label">Password</label><div class="input-group"><input type="password" class="form-control" id="password" name="password" placeholder="••••••••" required><button class="btn btn-outline-custom btn-eye" type="button" id="togglePassword"><i class="fas fa-eye"></i></button></div><small class="policy-text d-block mt-1">Use at least 8 characters including letters, numbers and symbols.</small></div>
            <div class="mb-3 position-relative"><label for="password2" class="form-label">Confirm Password</label><div class="input-group"><input type="password" class="form-control" id="password2" name="password2" placeholder="••••••••" required><button class="btn btn-outline-custom btn-eye" type="button" id="togglePassword2"><i class="fas fa-eye"></i></button></div></div>
            <div class="form-check mb-3"><input type="checkbox" class="form-check-input" id="terms" name="terms" required><label class="form-check-label" for="terms">I agree to the Terms and Conditions and Privacy Policy</label></div>
            <button type="submit" class="btn btn-primary-custom w-100" id="registerBtn">Register</button>
          </form>
          <div class="text-center mt-3">Already have an account? <a href="{% url 'account:login' %}">Login</a></div>
        </div>
      </div>
    </div>
  </div>
</section>
<script>
  function toggleInput(id,t){var el=document.getElementById(id);if(el){el.type=el.type==='password'?'text':'password';t.innerHTML=el.type==='password'?'<i class="fas fa-eye"></i>':'<i class="fas fa-eye-slash"></i>'}}
  var tp=document.getElementById('togglePassword');if(tp){tp.addEventListener('click',function(){toggleInput('password',this)})}
  var tp2=document.getElementById('togglePassword2');if(tp2){tp2.addEventListener('click',function(){toggleInput('password2',this)})}
  var form=document.getElementById('registerForm');
  function valid(){var p=document.getElementById('password');var c=document.getElementById('password2');var t=document.getElementById('terms');var ok=p&&c&&t&&p.value.length>=8&&c.value.length>=8&&p.value===c.value&&t.checked;var btn=document.getElementById('registerBtn');if(btn){btn.disabled=!ok}return ok}
  ['input','change'].forEach(function(ev){document.addEventListener(ev,valid)});
  if(form){form.addEventListener('submit',function(e){if(!valid()){e.preventDefault();return}var btn=document.getElementById('registerBtn');if(btn){btn.disabled=true;btn.innerHTML='<i class="fas fa-spinner fa-spin me-2"></i>Creating account...'}})}
</script>
{% endblock %}